g={};G=g.get
for l in open(i:=0):
 a,*B=l.split()
 for b in B:g[b]=G(b,[])+[k:=a[:3]];g[k]=G(k,[])+[b]
V={b}
while len(P:={*sum(map(G,V),[])}-V)>3:V|={max((len({*g[c]}&V),c)for c in P)[1]};i+=1
print(-~i*(len(g)+~i))